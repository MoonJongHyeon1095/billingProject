CREATE TABLE `WatchHistory` (
  `watchHistoryId` varchar(50) NOT NULL,
  `email` varchar(200) DEFAULT NULL,
  `videoId` int unsigned NOT NULL,
  `playedTime` int unsigned NOT NULL DEFAULT '0',
  `lastWatched` int unsigned NOT NULL DEFAULT '0',
  `deviceUUID` varchar(50) NOT NULL DEFAULT '',
  `adViewCount` smallint unsigned NOT NULL DEFAULT '0',
  `createdAt` date NOT NULL DEFAULT '2024-04-01',
  `watchedAt` datetime DEFAULT NULL,
  `numericOrderKey` bigint unsigned NOT NULL AUTO_INCREMENT,
  `assignedServer` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`createdAt`,`watchHistoryId`),
  UNIQUE KEY `WatchHistory_UN` (`numericOrderKey`,`createdAt`),
  KEY `WatchHistory_createdAt_IDX` (`createdAt`,`assignedServer`,`numericOrderKey`,`videoId`,`playedTime`,`adViewCount`) USING BTREE
)
PARTITION BY LIST (TO_DAYS(createdAt)) (
    PARTITION p01 VALUES IN (TO_DAYS('2024-05-01')),
    PARTITION p02 VALUES IN (TO_DAYS('2024-05-02')),
    PARTITION p03 VALUES IN (TO_DAYS('2024-05-03')),
    PARTITION p04 VALUES IN (TO_DAYS('2024-05-04')),
    PARTITION p05 VALUES IN (TO_DAYS('2024-05-05')),
    PARTITION p06 VALUES IN (TO_DAYS('2024-05-06')),
    PARTITION p07 VALUES IN (TO_DAYS('2024-05-07')),
    PARTITION p08 VALUES IN (TO_DAYS('2024-05-08')),
    PARTITION p09 VALUES IN (TO_DAYS('2024-05-09')),
    PARTITION p10 VALUES IN (TO_DAYS('2024-05-10')),
    PARTITION p11 VALUES IN (TO_DAYS('2024-05-11')),
    PARTITION p12 VALUES IN (TO_DAYS('2024-05-12')),
    PARTITION p13 VALUES IN (TO_DAYS('2024-05-13')),
    PARTITION p14 VALUES IN (TO_DAYS('2024-05-14')),
    PARTITION p15 VALUES IN (TO_DAYS('2024-05-15')),
    PARTITION p16 VALUES IN (TO_DAYS('2024-05-16')),
    PARTITION p17 VALUES IN (TO_DAYS('2024-05-17')),
    PARTITION p18 VALUES IN (TO_DAYS('2024-05-18')),
    PARTITION p19 VALUES IN (TO_DAYS('2024-05-19')),
    PARTITION p20 VALUES IN (TO_DAYS('2024-05-20')),
    PARTITION p21 VALUES IN (TO_DAYS('2024-05-21')),
    PARTITION p22 VALUES IN (TO_DAYS('2024-05-22')),
    PARTITION p23 VALUES IN (TO_DAYS('2024-05-23')),
    PARTITION p24 VALUES IN (TO_DAYS('2024-05-24')),
    PARTITION p25 VALUES IN (TO_DAYS('2024-05-25')),
    PARTITION p26 VALUES IN (TO_DAYS('2024-05-26')),
    PARTITION p27 VALUES IN (TO_DAYS('2024-05-27')),
    PARTITION p28 VALUES IN (TO_DAYS('2024-05-28')),
    PARTITION p29 VALUES IN (TO_DAYS('2024-05-29')),
    PARTITION p30 VALUES IN (TO_DAYS('2024-05-30'))
    );
